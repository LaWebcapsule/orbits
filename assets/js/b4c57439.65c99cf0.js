"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6444],{4918:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>u});const o=JSON.parse('{"id":"documentation/core-concepts/executor","title":"Executor","description":"Executors allow Actions to be run in specific contexts. For example, assume you want to build an app that requires external dependencies, like grunt, java, composer... You can specify that the deploy Action runs in a normal context and that the builder Action runs in a docker or in a lambda or in any other context managed by an executor.","source":"@site/docs/documentation/core-concepts/executor.md","sourceDirName":"documentation/core-concepts","slug":"/documentation/core-concepts/executor","permalink":"/documentation/core-concepts/executor","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Executor","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Runtime","permalink":"/documentation/core-concepts/runtime"},"next":{"title":"How to use the cdk with Orbits","permalink":"/documentation/core-concepts/cdk"}}');var c=t(4848),r=t(8453);const i={title:"Executor",sidebar_position:5},s="Executor",a={},u=[];function l(e){const n={code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"executor",children:"Executor"})}),"\n",(0,c.jsx)(n.p,{children:"Executors allow Actions to be run in specific contexts. For example, assume you want to build an app that requires external dependencies, like grunt, java, composer... You can specify that the deploy Action runs in a normal context and that the builder Action runs in a docker or in a lambda or in any other context managed by an executor."}),"\n",(0,c.jsx)(n.h1,{id:"concept",children:"Concept"}),"\n",(0,c.jsxs)(n.p,{children:["An executor changes the way the ",(0,c.jsx)(n.code,{children:"resume()"})," method executes. It mainly has two modes:\nWhen the ",(0,c.jsx)(n.code,{children:"resume()"})," of an Action with an Executor is called:"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"The executor checks if the execution is the expected one"}),"\n",(0,c.jsx)(n.li,{children:"If the execution is not the expected one, the executor takes care of calling the good execution context with the correct information. This can imply to run a docker executor, call a lambda function, launch an ECS task..."}),"\n",(0,c.jsxs)(n.li,{children:["If the execution context is the correct one, the executor runs the standard behavior of the ",(0,c.jsx)(n.code,{children:"resume()"}),".\nAs a consequence, an Action with an Executor executes normally, but in a context where you can choose the appropriate dependencies, right accesses..."]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"---\x3e :construction_worker: Today, we only have the DockerExecutor. We are expecting to write an Aws ecs and an Aws lambda executor. We would be pleased to receive contributions to go quicker!"}),"\n",(0,c.jsx)(n.h1,{id:"specify-an-executor",children:"Specify an Executor"}),"\n",(0,c.jsx)(n.p,{children:"You only need to add to the Action class:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-typescript",children:"export class MyAction extends Action {\n    executor = new DockerExecutor({\n        // ...\n    });\n}\n"})}),"\n",(0,c.jsx)(n.p,{children:"Sometimes, an Executor needs some installation before being able to be called.\nThis installation can include building a docker image, deploying a cdk...\nAs a consequence, an Executor has an install method which returns an Action."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-typescript",children:"const dockerExecutor = new DockerExecutor({\n    // ...\n});\nconst installAction = dockerExecutor.install();\n"})}),"\n",(0,c.jsx)(n.p,{children:"You should consume the install Action before using the Executor.\nExample:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-typescript",children:"export class MyBuildPipeline extends Workflow {\n    define() {\n        this.next(() => {\n            const dockerExecutor = new DockerExecutor({});\n            return dockerExecutor.install();\n        }).next(() => {\n            const myBuild = new ActionThatUseExecutor();\n            return myBuild;\n        });\n    }\n}\n"})}),"\n",(0,c.jsx)(n.h1,{id:"write-your-own-executor",children:"Write your own Executor"}),"\n",(0,c.jsx)(n.p,{children:"Writing your own Executor is a bit more complex than consuming an executing one.\nThe documentation on this point is pending."})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>s});var o=t(6540);const c={},r=o.createContext(c);function i(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);